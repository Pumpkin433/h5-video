(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sports/question"],{"0fd8":function(t,s,n){"use strict";var i=n("8065"),e=n.n(i);e.a},"4d59":function(t,s,n){"use strict";n.r(s);var i=n("8250"),e=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(s,t,function(){return i[t]})}(o);s["default"]=e.a},"554d":function(t,s,n){"use strict";var i={"uni-countdown":()=>n.e("components/uni-countdown/uni-countdown").then(n.bind(null,"4956"))},e=function(){var t=this,s=t.$createElement,i=(t._self._c,n("5a05")),e=n("6f138"),o=n("a15c");t.$mp.data=Object.assign({},{$root:{m0:i,m1:e,m2:o}})},o=[];n.d(s,"b",function(){return e}),n.d(s,"c",function(){return o}),n.d(s,"a",function(){return i})},"7c1c":function(t,s,n){"use strict";(function(t){n("836e"),n("921b");i(n("66fd"));var s=i(n("ad50"));function i(t){return t&&t.__esModule?t:{default:t}}t(s.default)}).call(this,n("543d")["createPage"])},8065:function(t,s,n){},8250:function(t,s,n){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=o(n("e89b")),e=o(n("fb8e"));function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){return n.e("components/linnian-CountDown/uni-countdown").then(n.bind(null,"cd52"))},a={name:"question",components:{uniCountdown:u},data:function(){return{isModalEnd:!1,isModalShare:!1,isModalMsg:!1,isModalAnswerError:!1,isModalAnswerTimeout:!1,second:10,reset:!1,questionList:[],q_key:0,question:{},correct:-1,sIndex:0,total_score:0,total_question:0,user_rank:1e6,uid:null,name:"",mobile:""}},onLoad:function(s){this.uid=t.getStorageSync("uid"),console.log(this.uid),void 0!==s.k&&0!==s.k?(this.q_key=s.k,this.getQuestionList()):(this.k=0,this.getQuestionList()),void 0!=s.s&&(this.total_score=s.s),void 0!==s.t&&void 0!==s.q_key&&s.k===s.t&&(this.isModalEnd=!0,this.reset=!this.reset,this.second=0,this.get_user_rank(this.uid,this.total_score)),t.share({provider:"weixin",scene:"WXSceneSession",type:0,href:"http://uniapp.dcloud.io/",title:"uni-app分享",summary:"我正在使用HBuilderX开发uni-app，赶紧跟我一起来体验！",imageUrl:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/uni@2x.png",success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},methods:{user_msg_add:function(){var s={uid:this.uid,name:this.name,mobile:this.mobile,score:this.total_score,rank:this.user_rank};i.default.post(e.default.sq+"/api/v1.h5.Questions/addUserInfo",s).then(function(s){console.log(s),1===s.data.data.insert&&t.reLaunch({url:"/pages/sports/sports"})}).catch(function(t){}).finally(function(){})},check_user_status:function(s){var n=this,o={uid:s};i.default.post(e.default.sq+"/api/v1.h5.Questions/uidIsExists",o).then(function(i){var e=i.data.data.status;console.log(e),0===e&&(n.isModalMsg=!0),1===e&&(n.update_user_score(s,n.total_score,n.user_rank),t.reLaunch({url:"/pages/sports/sports"}))}).catch(function(t){}).finally(function(){})},update_user_score:function(t,s,n){var o={uid:t,score:s,rank:n};i.default.post(e.default.sq+"/api/v1.h5.Questions/updateUserScore",o).then(function(t){console.log(t)}).catch(function(t){}).finally(function(){})},select_option:function(s,n){this.sIndex=n,this.correct=this.question.correct,this.q_key++,s===this.question.correct?(this.total_score++,setTimeout(function(s,n,i){t.redirectTo({url:"/pages/sports/question?k="+s+"&s="+n+"&t="+i,success:function(t){console.log(t)},fail:function(){},complete:function(){}})},1e3,this.q_key,this.total_score,this.total_question)):(this.get_user_rank(this.uid,this.total_score),this.isModalAnswerError=!0,this.reset=!this.reset,this.second=0,this.isModalAnswerTimeout=!1)},get_user_rank:function(t,s){var n=this,o={uid:t,score:s};i.default.post(e.default.sq+"/api/v1.h5.Questions/getUserRank",o).then(function(t){console.log(t),n.user_rank=t.data.data.rank}).catch(function(t){}).finally(function(){})},score_share_button:function(){this.isModalShare=!0,this.isModalAnswerError=!1,this.isModalAnswerTimeout=!1,this.isModalEnd=!1,this.isModalMsg=!1},modal_end:function(){this.isModalEnd=!0,this.get_user_rank(this.uid,this.total_score)},question_modal:function(){this.isModalEnd=!1,this.check_user_status(this.uid)},share_modal:function(){this.isModalShare=!1,this.check_user_status(this.uid)},msg_modal:function(){t.reLaunch({url:"/pages/sports/sports"})},answer_error_modal:function(){this.check_user_status(this.uid),this.isModalAnswerError=!1},answer_timeout_modal:function(){this.isModalAnswerTimeout=!1,this.check_user_status(this.uid)},timeUp:function(){!0===this.isModalAnswerError?this.isModalAnswerTimeout=!1:this.isModalAnswerTimeout=!0},getQuestionList:function(){var t=this;i.default.get(e.default.sq+"/api/v1.h5.Questions/list",[{}]).then(function(s){t.questionList=s.data.data.list,t.total_question=s.data.data.list.length,t.question=s.data.data.list[t.q_key],!0===t.isModalEnd&&(t.question={q_name:"1",option_a:"1",option_b:"1",option_c:"1",option_d:"1",correct:"1"})}).catch(function(t){}).finally(function(){})}}};s.default=a}).call(this,n("543d")["default"])},ad50:function(t,s,n){"use strict";n.r(s);var i=n("554d"),e=n("4d59");for(var o in e)"default"!==o&&function(t){n.d(s,t,function(){return e[t]})}(o);n("0fd8");var u,a=n("f0c5"),r=Object(a["a"])(e["default"],i["b"],i["c"],!1,null,"86eef8e2",null,!1,i["a"],u);s["default"]=r.exports}},[["7c1c","common/runtime","common/vendor"]]]);