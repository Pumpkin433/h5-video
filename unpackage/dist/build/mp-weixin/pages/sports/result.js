(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sports/result"],{"1c73":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(i("3b89")),n=o(i("9f72"));function o(t){return t&&t.__esModule?t:{default:t}}var r={name:"result",data:function(){return{score:0,max_score:0,uid:"",token:"",ns_device_id:"",isModalMsg:!1,nickname:"",mobile:"",qrcode:"",country_code:"+86",user_type:null,honor:""}},onLoad:function(e){var i=this;if(this.score=e.s,this.user_type=t.getStorageSync("user_type"),this.uid=t.getStorageSync("uid"),this.token=t.getStorageSync("token"),this.ns_device_id=t.getStorageSync("ns_device_id"),this.getUserMaxScore(this.uid,this.$question.activity_id),this.score>=0&&this.score<=10?this.honor="菜鸟飞飞":this.score>=11&&this.score<=30?this.honor="略知一二":this.score>=31&&this.score<=49?this.honor="入门球迷":this.score>=50&&this.score<=60?this.honor="资深老鸟":this.score>=61&&this.score<=79?this.honor="小有名气":this.score>=80&&this.score<=90?this.honor="意见领袖":this.score>=91&&this.score<=99?this.honor="无所不知":100==this.score&&(this.honor="NBA英雄"),console.log(this.user_type),1==this.user_type){var o={uid:this.uid,activity_id:this.$question.activity_id};s.default.post(n.default.sq+"/activity/api.users/checkUidStatus",o).then((function(e){if(200!=e.status)return alert("server error");var o=e.data.data.count;if(o<=0){var r=n.default.bd+"/v3/user/info",a={ns_device_id:i.ns_device_id,uid:i.uid,token:i.token};s.default.get(r,{headers:a}).then((function(e){if(console.log(e),200!=e.status)return alert("server error");if(1!=e.data.Status)return t.showToast({title:e.data.ErrorMsg,icon:"none",mask:!0,duration:2e3});var s=e.data.Data.nickname,n=e.data.Data.phone;console.log(e),""==n?(i.isModalMsg=!0,i.user_type=3,t.removeStorageSync("user_type"),t.setStorageSync("user_type",3)):i.addUser(i.uid,s,n,i.$question.activity_id,i.score,i.ns_device_id,1)}))}else i.updateUserScore(i.uid,i.$question.activity_id,i.score,2)})).catch((function(t){})).finally((function(){}))}2==this.user_type&&this.answerAgain(2)},methods:{closeMsgModal:function(){this.isModalMsg=!1},sendCode:function(e){var i={ns_device_id:this.ns_device_id,phone:e,country_code:this.country_code},o=n.default.bd+"/SendLoginSms";s.default.get(o,{headers:i}).then((function(e){console.log(e),200==e.status?1===e.data.Status?t.showToast({title:"验证码 发送成功",mask:!0,duration:2e3}):t.showToast({title:"验证码发送失败",icon:"none",mask:!0,duration:2e3}):alert("server error")})).catch((function(t){})).finally((function(){}))},otpLogin:function(){var e=this;if(""==this.nickname)return t.showToast({title:"请输入昵称",icon:"none",mask:!0,duration:2e3});if(""==this.mobile)return t.showToast({title:"请输入昵称",icon:"none",mask:!0,duration:2e3});if(""==this.qrcode)return t.showToast({title:"请输入验证码",icon:"none",mask:!0,duration:2e3});if(""!=this.mobile){var i={mobile:this.mobile,activity_id:this.$question.activity_id,user_type:this.user_type};s.default.post(n.default.sq+"/activity/api.users/checkMobileExits",i).then((function(i){if(console.log(i),200!=i.status)return alert("server error");if(0==i.data.code){var o=i.data.data.answer_chance;if(o<=0)return t.showToast({title:"此手机号无答题机会",icon:"none",mask:!0,duration:2e3});t.removeStorageSync("uid"),t.setStorageSync("uid",i.data.data.uid),e.uid=i.data.data.uid,e.updateUserScore(e.uid,e.$question.activity_id,e.score,1)}else{var r={ns_device_id:e.ns_device_id},a={phone:e.mobile,country_code:e.country_code,code:e.qrcode,device_id:"website",platform:"web"},c=n.default.bd+"/OTPLogin";s.default.post(c,a,{headers:r}).then((function(i){if(200!=i.status)return alert("server error");if(1!=i.data.Status)return t.showToast({title:"验证码错误",icon:"none",mask:!0,duration:2e3});var o={uid:e.uid,name:e.nickname,mobile:e.mobile,activity_id:e.$question.activity_id,score:e.score,ns_device_id:e.ns_device_id,user_type:e.user_type};s.default.post(n.default.sq+"/activity/api.users/add",o).then((function(t){if(console.log(t),200!=t.status)return alert("server error");e.isModalMsg=!1})).catch((function(t){})).finally((function(){}))})).catch((function(t){})).finally((function(){}))}})).catch((function(t){})).finally((function(){}))}},answerAgain:function(e){var i=this;if(2==this.user_type||3==this.user_type){var o={uid:this.uid,activity_id:this.$question.activity_id};s.default.post(n.default.sq+"/activity/api.users/checkUidStatus",o).then((function(t){if(200!=t.status)return alert("server error");var s=t.data.data.count;s<=0?i.isModalMsg=!0:i.updateUserScore(i.uid,i.$question.activity_id,i.score,e)})).catch((function(t){})).finally((function(){}))}1==this.user_type&&t.reLaunch({url:"/?uid="+this.uid})},addUser:function(t,e,i,o,r,a,c){var u={uid:t,name:e,mobile:i,activity_id:o,score:r,ns_device_id:a,user_type:c};s.default.post(n.default.sq+"/activity/api.Users/add",u).then((function(t){if(200!=t.status)return alert("server error")})).catch((function(t){})).finally((function(){}))},updateUserScore:function(e,i,o,r){var a=this,c={uid:e,activity_id:i,score:o};s.default.post(n.default.sq+"/activity/api.users/updateScore",c).then((function(e){if(console.log(e),200!=e.status)return alert("server error");1==r&&t.reLaunch({url:"/?uid="+a.uid})})).catch((function(t){})).finally((function(){}))},getUserMaxScore:function(t,e){var i=this,o={uid:t,activity_id:e};s.default.post(n.default.sq+"/activity/api.users/getUserMaxScore",o).then((function(t){if(console.log(t),200!=t.status)return alert("server error");i.max_score=t.data.data.maxScore,console.log(i.max_score)})).catch((function(t){})).finally((function(){}))}}};e.default=r}).call(this,i("543d")["default"])},2852:function(t,e,i){"use strict";i.r(e);var s=i("d7c6"),n=i("60a2");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("e573");var r,a=i("f0c5"),c=Object(a["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],r);e["default"]=c.exports},"60a2":function(t,e,i){"use strict";i.r(e);var s=i("1c73"),n=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);e["default"]=n.a},bfba:function(t,e,i){},cbd1:function(t,e,i){"use strict";(function(t){i("d8ed"),i("921b");s(i("66fd"));var e=s(i("2852"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},d7c6:function(t,e,i){"use strict";var s,n=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return s}))},e573:function(t,e,i){"use strict";var s=i("bfba"),n=i.n(s);n.a}},[["cbd1","common/runtime","common/vendor"]]]);