(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sports-result"],{2852:function(t,i,e){"use strict";e.r(i);var a=e("d3a6"),n=e("60a2");for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("ddf4");var o,r=e("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"6d431b62",null,!1,a["a"],o);i["default"]=d.exports},"4c79":function(t,i,e){"use strict";(function(t){var a=e("ee27");e("d3b7"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("3b89")),s=a(e("9f72")),o={name:"result",data:function(){return{score:0,max_score:0,uid:"",token:"",ns_device_id:"",isModalMsg:!1,nickname:"",mobile:"",qrcode:"",country_code:"+86",user_type:null,honor:""}},onLoad:function(i){var e=this;if(this.score=i.s,this.user_type=uni.getStorageSync("user_type"),this.uid=uni.getStorageSync("uid"),this.ns_device_id=uni.getStorageSync("ns_device_id"),this.getUserMaxScore(this.uid,this.$question.activity_id),this.score>=0&&this.score<=10?this.honor="菜鸟飞飞":this.score>=11&&this.score<=30?this.honor="略知一二":this.score>=31&&this.score<=49?this.honor="入门球迷":this.score>=50&&this.score<=60?this.honor="资深老鸟":this.score>=61&&this.score<=79?this.honor="小有名气":this.score>=80&&this.score<=90?this.honor="意见领袖":this.score>=91&&this.score<=99?this.honor="无所不知":100==this.score&&(this.honor="NBA英雄"),1==this.user_type){this.uid=uni.getStorageSync("uid"),this.token=uni.getStorageSync("token"),this.ns_device_id=uni.getStorageSync("ns_device_id");var a={uid:this.uid,activity_id:this.$question.activity_id};n.default.post(s.default.sq+"/activity/api.users/checkUidStatus",a).then((function(i){if(200!=i.status)return alert("server error");var a=i.data.data.count;if(a<=0){var o=s.default.bd+"/v3/user/info",r={ns_device_id:e.ns_device_id,uid:e.uid,token:e.token};n.default.get(o,{params:r}).then((function(i){if(t.log(i),200!=i.status)return alert("server error");if(1!=i.data.Status)return alert(i.data.ErrorMsg);var a=i.data.Data.nickname,n=i.data.Data.phone;e.addUser(e.uid,a,n,e.$question.activity_id,e.score,e.ns_device_id,1)}))}else e.updateUserScore(e.uid,e.$question.activity_id,e.score)})).catch((function(t){})).finally((function(){}))}2==this.user_type&&this.answerAgain(2)},methods:{closeMsgModal:function(){this.isModalMsg=!1},sendCode:function(i){var e={ns_device_id:this.ns_device_id,phone:i,country_code:this.country_code},a=s.default.bd+"/SendLoginSms";n.default.get(a,{headers:e}).then((function(i){t.log(i),200==i.status?1===i.data.Status?alert("验证码 发送成功"):alert("验证码 发送失败"):alert("server error")})).catch((function(t){})).finally((function(){}))},otpLogin:function(){var i=this;if(""==this.nickname)return alert("请输入昵称");if(""==this.mobile)return alert("请输入手机号");if(""==this.qrcode)return alert("请输入验证码");if(""!=this.mobile){var e={mobile:this.mobile,activity_id:this.$question.activity_id,user_type:2};n.default.post(s.default.sq+"/activity/api.users/checkMobileExits",e).then((function(e){if(t.log(e),200!=e.status)return alert("server error");if(0==e.data.code){var a=e.data.data.answer_chance;if(a<=0)return alert("该手机答题机会已经用完");uni.removeStorageSync("uid"),uni.setStorageSync("uid",e.data.data.uid),i.uid=e.data.data.uid,i.updateUserScore(i.uid,i.$question.activity_id,i.score,1)}else{var o={ns_device_id:i.ns_device_id},r={phone:i.mobile,country_code:i.country_code,code:i.qrcode,device_id:"website",platform:"web"},d="https://api.npse.com:8081/OTPLogin";n.default.post(d,r,{headers:o}).then((function(e){if(t.log(e),200!=e.status)return alert("server error");var a={uid:i.uid,name:i.nickname,mobile:i.mobile,activity_id:i.$question.activity_id,score:i.score,ns_device_id:i.ns_device_id,user_type:2};n.default.post(s.default.sq+"/activity/api.users/add",a).then((function(i){if(t.log(i),200!=i.status)return alert("server error");location.reload()})).catch((function(t){})).finally((function(){}))})).catch((function(t){})).finally((function(){}))}})).catch((function(t){})).finally((function(){}))}},answerAgain:function(t){var i=this;if(2==this.user_type){var e={uid:this.uid,activity_id:this.$question.activity_id};n.default.post(s.default.sq+"/activity/api.users/checkUidStatus",e).then((function(e){if(200!=e.status)return alert("server error");var a=e.data.data.count;a<=0?i.isModalMsg=!0:i.updateUserScore(i.uid,i.$question.activity_id,i.score,t)})).catch((function(t){})).finally((function(){}))}1==this.user_type&&uni.reLaunch({url:"/"})},addUser:function(t,i,e,a,o,r,d){var c={uid:t,name:i,mobile:e,activity_id:a,score:o,ns_device_id:r,user_type:d};n.default.post(s.default.sq+"/activity/api.Users/add",c).then((function(t){if(200!=t.status)return alert("server error");location.reload()})).catch((function(t){})).finally((function(){}))},updateUserScore:function(i,e,a,o){var r={uid:i,activity_id:e,score:a};n.default.post(s.default.sq+"/activity/api.users/updateScore",r).then((function(i){if(t.log(i),200!=i.status)return alert("server error");1==o&&uni.reLaunch({url:"/"})})).catch((function(t){})).finally((function(){}))},getUserMaxScore:function(i,e){var a=this,o={uid:i,activity_id:e};n.default.post(s.default.sq+"/activity/api.users/getUserMaxScore",o).then((function(i){if(t.log(i),200!=i.status)return alert("server error");a.max_score=i.data.data.maxScore?null:0})).catch((function(t){})).finally((function(){}))}}};i.default=o}).call(this,e("5a52")["default"])},"5a14":function(t,i,e){var a=e("24fb"),n=e("1de5"),s=e("895a");i=a(!1);var o=n(s);i.push([t.i,".result-bg[data-v-6d431b62]{background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-bg.png) no-repeat 50%;background-size:100% 100%;width:100%;height:100%}.res-jb[data-v-6d431b62]{width:%?270?%;height:%?286?%;margin:0 auto;margin-top:%?40?%}.res-jb img[data-v-6d431b62]{width:100%;height:100%}.res-1[data-v-6d431b62]{margin-top:%?17?%;text-align:center;font-size:%?29?%;font-family:Lantinghei SC;font-weight:700;color:#333;line-height:%?36?%}.res-1 span[data-v-6d431b62]{color:#ee4d67;font-size:%?36?%}.res-2[data-v-6d431b62]{margin-top:%?40?%;text-align:center;font-size:%?29?%;font-family:Lantinghei SC;font-weight:700;color:#333}.res-qrcode[data-v-6d431b62]{width:%?192?%;height:%?189?%;margin:0 auto;margin-top:%?42?%}.res-qrcode img[data-v-6d431b62]{width:100%;height:100%}.res-3[data-v-6d431b62]{width:%?417?%;height:%?82?%;margin:0 auto;margin-top:%?45?%;background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/res-button.png) no-repeat 50%;background-size:100% 100%;text-align:center;font-size:%?30?%;font-family:Lantinghei SC;font-weight:700;color:#ee4d67;line-height:%?82?%}.res-4[data-v-6d431b62]{margin-top:%?22?%;text-align:center;font-size:%?18?%;font-family:Lantinghei SC;font-weight:600;color:#666}.res-5[data-v-6d431b62]{width:%?330?%;height:%?100?%;margin:0 auto;background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-again.png) no-repeat 50%;background-size:100% 100%;text-align:center;font-size:%?44?%;font-family:Lantinghei SC;font-weight:600;color:#fff;text-shadow:0 3px 8px #df1c58}.modal-msg[data-v-6d431b62]{background-color:rgba(0,0,0,.5);background-position:top;background-size:100% 100%;width:100%;height:100%;position:fixed;z-index:10000000;top:0;left:0}.modal-msg-bg[data-v-6d431b62]{background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/msg-modal-bg.png) no-repeat;background-size:100% 100%;width:%?516?%;height:%?546?%;top:0;left:0;right:0;bottom:0;margin:auto;position:fixed;z-index:100000000}.modal-msg-bg h3[data-v-6d431b62]{font-size:%?36?%;font-family:wawaw5;font-weight:700;color:#292929;text-align:center}.modal-msg-name[data-v-6d431b62]{width:90%;height:%?80?%;margin:0 auto;margin-top:%?20?%}.modal-msg-name-label[data-v-6d431b62]{float:left;width:19%;text-align:right;font-family:wawaw5}.modal-msg-name-input[data-v-6d431b62]{float:left;width:79%;border-bottom:1px solid #000}.modal-msg-mobile[data-v-6d431b62]{width:90%;height:%?80?%;margin:0 auto}.modal-msg-mobile-label[data-v-6d431b62]{float:left;width:19%;text-align:right;font-family:wawaw5}.modal-msg-mobile-input[data-v-6d431b62]{float:left;width:79%;border-bottom:1px solid #000}.modal-msg-mobile-button[data-v-6d431b62]{position:absolute;right:%?18?%;font-size:%?24?%;font-family:wawaw5;font-weight:400;color:#3d75d2}.modal-msg-qrcode[data-v-6d431b62]{width:90%;height:%?80?%;margin:0 auto}.modal-msg-qrcode-label[data-v-6d431b62]{float:left;width:19%;font-family:wawaw5;text-align:right}.modal-msg-qrcode-input[data-v-6d431b62]{float:left;width:79%;border-bottom:1px solid #000}.modal-msg-button[data-v-6d431b62]{width:%?330?%;height:%?100?%;margin:0 auto;margin-top:%?40?%;background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-again.png) no-repeat 50%;background-size:100% 100%;text-align:center;font-size:%?44?%;font-family:Lantinghei SC;font-weight:600;color:#fff;text-shadow:0 3px 8px #df1c58}@font-face{font-family:wawaw5;src:url("+o+")}",""]),t.exports=i},"60a2":function(t,i,e){"use strict";e.r(i);var a=e("4c79"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a},"895a":function(t,i,e){t.exports=e.p+"static/fonts/huakangwawaW5.22d3fd3d.ttf"},ca23:function(t,i,e){var a=e("5a14");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("339f3bee",a,!0,{sourceMap:!1,shadowMode:!1})},d3a6:function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"uni-flex uni-column result-bg"},[e("v-uni-view",{staticClass:"flex-item flex-item-V res-jb"},[e("img",{attrs:{src:"https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-jb.png",alt:""}})]),e("v-uni-view",{staticClass:"flex-item flex-item-V res-1"},[t._v("你本次获得"),e("span",[t._v(t._s(t.score))]),t._v("积分")]),e("v-uni-view",{staticClass:"flex-item flex-item-V  res-2"},[t._v("历史最高分 "+t._s(t.max_score)+" 分"),e("br"),t._v("获得称号")]),e("v-uni-view",{staticClass:"flex-item flex-item-V  res-3"},[t._v(t._s(t.honor))]),e("v-uni-view",{staticClass:"flex-item flex-item-V  res-qrcode"},[e("img",{attrs:{src:"https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-qrcode.png",alt:""}})]),e("v-uni-view",{staticClass:"flex-item flex-item-V res-4"},[t._v("截图分享给好友")]),e("v-uni-view",{staticClass:"flex-item flex-item-V res-5",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.answerAgain(1)}}},[t._v("再来一次")]),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!0===t.isModalMsg,expression:"isModalMsg === true"}],staticClass:"modal-msg",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.closeMsgModal.apply(void 0,arguments)}}}),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!0===t.isModalMsg,expression:"isModalMsg === true"}],staticClass:"modal-msg-bg"},[e("h3",[t._v("信息填写")]),e("v-uni-view",{staticClass:"modal-msg-name"},[e("v-uni-view",{staticClass:"modal-msg-name-label"},[t._v("姓名")]),e("v-uni-view",{staticClass:"modal-msg-name-input"},[e("v-uni-input",{attrs:{type:"text"},model:{value:t.nickname,callback:function(i){t.nickname=i},expression:"nickname"}})],1)],1),e("v-uni-view",{staticClass:"modal-msg-mobile"},[e("v-uni-view",{staticClass:"modal-msg-mobile-label"},[t._v("手机号")]),e("v-uni-view",{staticClass:"modal-msg-mobile-input"},[e("v-uni-input",{attrs:{type:"number"},model:{value:t.mobile,callback:function(i){t.mobile=i},expression:"mobile"}})],1),e("v-uni-view",{staticClass:"modal-msg-mobile-button",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.sendCode(t.mobile)}}},[t._v("发送验证码")])],1),e("v-uni-view",{staticClass:"modal-msg-qrcode"},[e("v-uni-view",{staticClass:"modal-msg-qrcode-label"},[t._v("验证码")]),e("v-uni-view",{staticClass:"modal-msg-qrcode-input"},[e("v-uni-input",{attrs:{type:"number"},model:{value:t.qrcode,callback:function(i){t.qrcode=i},expression:"qrcode"}})],1)],1),e("v-uni-view",{staticClass:"modal-msg-button",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.otpLogin.apply(void 0,arguments)}}},[e("span",[t._v("确认信息")])])],1)],1)},s=[];e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return a}))},ddf4:function(t,i,e){"use strict";var a=e("ca23"),n=e.n(a);n.a}}]);