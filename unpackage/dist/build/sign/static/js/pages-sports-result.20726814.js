(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sports-result"],{"0e0b":function(t,e,i){"use strict";(function(t){var a=i("ee27");i("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("926c")),s=a(i("9c5e")),o={name:"result",data:function(){return{score:0,max_score:0,uid:"",token:"",ns_device_id:"",isModalMsg:!1,nickname:"",mobile:"",qrcode:"",country_code:"+86",user_type:null,honor:""}},onLoad:function(e){var i=this;if(this.score=e.s,this.user_type=uni.getStorageSync("user_type"),this.uid=uni.getStorageSync("uid"),this.token=uni.getStorageSync("token"),this.ns_device_id=uni.getStorageSync("ns_device_id"),this.getUserMaxScore(this.uid,this.$question.activity_id),this.score>=0&&this.score<=10?this.honor="菜鸟飞飞":this.score>=11&&this.score<=30?this.honor="略知一二":this.score>=31&&this.score<=49?this.honor="入门球迷":this.score>=50&&this.score<=60?this.honor="资深老鸟":this.score>=61&&this.score<=79?this.honor="小有名气":this.score>=80&&this.score<=90?this.honor="意见领袖":this.score>=91&&this.score<=99?this.honor="无所不知":100==this.score&&(this.honor="NBA英雄"),t.log(this.user_type),1==this.user_type){var a={uid:this.uid,activity_id:this.$question.activity_id};n.default.post(s.default.sq+"/activity/api.users/checkUidStatus",a).then((function(e){if(200!=e.status)return alert("server error");var a=e.data.data.count;if(a<=0){var o=s.default.bd+"/v3/user/info",r={ns_device_id:i.ns_device_id,uid:i.uid,token:i.token};n.default.get(o,{headers:r}).then((function(e){if(t.log(e),200!=e.status)return alert("server error");if(1!=e.data.Status)return uni.showToast({title:e.data.ErrorMsg,icon:"none",mask:!0,duration:2e3});var a=e.data.Data.nickname,n=e.data.Data.phone;t.log(e),""==n?(i.isModalMsg=!0,i.user_type=3,uni.removeStorageSync("user_type"),uni.setStorageSync("user_type",3)):i.addUser(i.uid,a,n,i.$question.activity_id,i.score,i.ns_device_id,1)}))}else i.updateUserScore(i.uid,i.$question.activity_id,i.score,2)})).catch((function(t){})).finally((function(){}))}2==this.user_type&&this.answerAgain(2)},methods:{closeMsgModal:function(){this.isModalMsg=!1},sendCode:function(e){var i={ns_device_id:this.ns_device_id,phone:e,country_code:this.country_code},a=s.default.bd+"/SendLoginSms";n.default.get(a,{headers:i}).then((function(e){t.log(e),200==e.status?1===e.data.Status?uni.showToast({title:"验证码 发送成功",mask:!0,duration:2e3}):uni.showToast({title:"验证码发送失败",icon:"none",mask:!0,duration:2e3}):alert("server error")})).catch((function(t){})).finally((function(){}))},otpLogin:function(){var e=this;if(""==this.nickname)return uni.showToast({title:"请输入昵称",icon:"none",mask:!0,duration:2e3});if(""==this.mobile)return uni.showToast({title:"请输入昵称",icon:"none",mask:!0,duration:2e3});if(""==this.qrcode)return uni.showToast({title:"请输入验证码",icon:"none",mask:!0,duration:2e3});if(""!=this.mobile){var i={mobile:this.mobile,activity_id:this.$question.activity_id,user_type:this.user_type};n.default.post(s.default.sq+"/activity/api.users/checkMobileExits",i).then((function(i){if(t.log(i),200!=i.status)return alert("server error");if(0==i.data.code){var a=i.data.data.answer_chance;if(a<=0)return uni.showToast({title:"此手机号无答题机会",icon:"none",mask:!0,duration:2e3});uni.removeStorageSync("uid"),uni.setStorageSync("uid",i.data.data.uid),e.uid=i.data.data.uid,e.updateUserScore(e.uid,e.$question.activity_id,e.score,1)}else{var o={ns_device_id:e.ns_device_id},r={phone:e.mobile,country_code:e.country_code,code:e.qrcode,device_id:"website",platform:"web"},c=s.default.bd+"/OTPLogin";n.default.post(c,r,{headers:o}).then((function(i){if(200!=i.status)return alert("server error");if(1!=i.data.Status)return uni.showToast({title:"验证码错误",icon:"none",mask:!0,duration:2e3});var a={uid:e.uid,name:e.nickname,mobile:e.mobile,activity_id:e.$question.activity_id,score:e.score,ns_device_id:e.ns_device_id,user_type:e.user_type};n.default.post(s.default.sq+"/activity/api.users/add",a).then((function(i){if(t.log(i),200!=i.status)return alert("server error");e.isModalMsg=!1})).catch((function(t){})).finally((function(){}))})).catch((function(t){})).finally((function(){}))}})).catch((function(t){})).finally((function(){}))}},answerAgain:function(t){var e=this;if(2==this.user_type||3==this.user_type){var i={uid:this.uid,activity_id:this.$question.activity_id};n.default.post(s.default.sq+"/activity/api.users/checkUidStatus",i).then((function(i){if(200!=i.status)return alert("server error");var a=i.data.data.count;a<=0?e.isModalMsg=!0:e.updateUserScore(e.uid,e.$question.activity_id,e.score,t)})).catch((function(t){})).finally((function(){}))}1==this.user_type&&uni.reLaunch({url:"/?uid="+this.uid})},addUser:function(t,e,i,a,o,r,c){var u={uid:t,name:e,mobile:i,activity_id:a,score:o,ns_device_id:r,user_type:c};n.default.post(s.default.sq+"/activity/api.Users/add",u).then((function(t){if(200!=t.status)return alert("server error")})).catch((function(t){})).finally((function(){}))},updateUserScore:function(e,i,a,o){var r=this,c={uid:e,activity_id:i,score:a};n.default.post(s.default.sq+"/activity/api.users/updateScore",c).then((function(e){if(t.log(e),200!=e.status)return alert("server error");1==o&&uni.reLaunch({url:"/?uid="+r.uid})})).catch((function(t){})).finally((function(){}))},getUserMaxScore:function(e,i){var a=this,o={uid:e,activity_id:i};n.default.post(s.default.sq+"/activity/api.users/getUserMaxScore",o).then((function(e){if(t.log(e),200!=e.status)return alert("server error");a.max_score=e.data.data.maxScore,t.log(a.max_score)})).catch((function(t){})).finally((function(){}))}}};e.default=o}).call(this,i("5a52")["default"])},2406:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".result-bg[data-v-01614688]{background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-bg.png) no-repeat 50%;background-size:100% 100%;width:100%;height:100%}.res-jb[data-v-01614688]{width:%?270?%;height:%?286?%;margin:0 auto;margin-top:%?80?%}.res-jb img[data-v-01614688]{width:100%;height:100%}.res-1[data-v-01614688]{margin-top:%?17?%;text-align:center;font-size:%?29?%;font-family:Lantinghei SC;font-weight:700;color:#333;line-height:%?36?%}.res-1 span[data-v-01614688]{color:#ee4d67;font-size:%?36?%}.res-2[data-v-01614688]{margin-top:%?40?%;text-align:center;font-size:%?29?%;font-family:Lantinghei SC;font-weight:700;color:#333}.res-qrcode[data-v-01614688]{width:%?192?%;height:%?189?%;margin:0 auto;margin-top:%?62?%}.res-qrcode img[data-v-01614688]{width:100%;height:100%}.res-3[data-v-01614688]{width:%?417?%;height:%?82?%;margin:0 auto;margin-top:%?80?%;background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/res-button.png) no-repeat 50%;background-size:100% 100%;text-align:center;font-size:%?30?%;font-family:Lantinghei SC;font-weight:700;color:#ee4d67;line-height:%?82?%}.res-4[data-v-01614688]{margin-top:%?22?%;text-align:center;font-size:%?18?%;font-family:Lantinghei SC;font-weight:600;color:#666}.res-5[data-v-01614688]{width:%?330?%;height:%?100?%;margin:0 auto;margin-top:%?40?%;background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-again.png) no-repeat 50%;background-size:100% 100%;text-align:center;font-size:%?44?%;font-family:Lantinghei SC;font-weight:600;color:#fff;text-shadow:0 3px 8px #df1c58}.modal-msg[data-v-01614688]{background-color:rgba(0,0,0,.5);background-position:top;background-size:100% 100%;width:100%;height:100%;position:fixed;z-index:100;top:0;left:0}.modal-msg-bg[data-v-01614688]{background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/msg-modal-bg.png) no-repeat;background-size:100% 100%;width:%?516?%;height:%?576?%;top:0;left:0;right:0;bottom:0;margin:auto;position:fixed;z-index:120}.modal-msg-bg h3[data-v-01614688]{font-size:%?36?%;font-family:wawaw5;font-weight:700;color:#292929;text-align:center}.modal-msg-name[data-v-01614688]{width:90%;height:%?80?%;margin:0 auto;margin-top:%?20?%}.modal-msg-alert-text[data-v-01614688]{text-align:center;font-family:wawaw5;font-size:%?22?%;font-weight:400;color:#3d75d2}.modal-msg-name-label[data-v-01614688]{float:left;width:19%;text-align:right;font-family:wawaw5}.modal-msg-name-input[data-v-01614688]{float:left;width:79%;border-bottom:1px solid #000;text-indent:%?14?%}.modal-msg-mobile[data-v-01614688]{width:90%;height:%?80?%;margin:0 auto}.modal-msg-mobile-label[data-v-01614688]{float:left;width:19%;text-align:right;font-family:wawaw5}.modal-msg-mobile-input[data-v-01614688]{float:left;width:79%;border-bottom:1px solid #000;text-indent:%?14?%}.modal-msg-mobile-button[data-v-01614688]{position:absolute;right:%?18?%;font-size:%?24?%;font-family:wawaw5;font-weight:400;color:#3d75d2}.modal-msg-qrcode[data-v-01614688]{width:90%;height:%?80?%;margin:0 auto}.modal-msg-qrcode-label[data-v-01614688]{float:left;width:19%;font-family:wawaw5;text-align:right}.modal-msg-qrcode-input[data-v-01614688]{float:left;width:79%;border-bottom:1px solid #000;text-indent:%?14?%}.modal-msg-button[data-v-01614688]{width:%?330?%;height:%?100?%;margin:0 auto;margin-top:%?40?%;background:url(https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-again.png) no-repeat 50%;background-size:100% 100%;text-align:center;font-size:%?44?%;font-family:Lantinghei SC;font-weight:600;color:#fff;text-shadow:0 3px 8px #df1c58}@font-face{font-family:wawaw5;src:url(https://aloss.hotforest.cn/basketball-v2/huakangwawaW5.ttf)}",""]),t.exports=e},"4ced":function(t,e,i){"use strict";i.r(e);var a=i("0e0b"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},a4f1:function(t,e,i){"use strict";i.r(e);var a=i("abd3"),n=i("4ced");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("bd79");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"01614688",null,!1,a["a"],o);e["default"]=c.exports},a99e:function(t,e,i){var a=i("2406");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("466118bc",a,!0,{sourceMap:!1,shadowMode:!1})},abd3:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-flex uni-column result-bg"},[i("v-uni-view",{staticClass:"flex-item flex-item-V res-jb"},[i("img",{attrs:{src:"https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-jb.png",alt:""}})]),i("v-uni-view",{staticClass:"flex-item flex-item-V res-1"},[t._v("你本次获得"),i("span",[t._v(t._s(t.score))]),t._v("积分")]),null!==t.max_score?i("v-uni-view",{staticClass:"flex-item flex-item-V  res-2"},[t._v("历史最高分 "+t._s(t.max_score)+" 分"),i("br"),t._v("获得称号")]):t._e(),null==t.max_score?i("v-uni-view",{staticClass:"flex-item flex-item-V  res-2"},[t._v("历史最高分 0 分"),i("br"),t._v("获得称号")]):t._e(),i("v-uni-view",{staticClass:"flex-item flex-item-V  res-3"},[t._v(t._s(t.honor))]),i("v-uni-view",{staticClass:"flex-item flex-item-V  res-qrcode"},[i("img",{attrs:{src:"https://h5-activity.oss-cn-shanghai.aliyuncs.com/basketball-v2/result-qrcode.png",alt:""}})]),i("v-uni-view",{staticClass:"flex-item flex-item-V res-4"},[t._v("截图分享给好友")]),i("v-uni-view",{staticClass:"flex-item flex-item-V res-5",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.answerAgain(1)}}},[t._v("再来一次")]),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!0===t.isModalMsg,expression:"isModalMsg === true"}],staticClass:"modal-msg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeMsgModal.apply(void 0,arguments)}}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!0===t.isModalMsg,expression:"isModalMsg === true"}],staticClass:"modal-msg-bg"},[i("h3",[t._v("信息填写")]),i("v-uni-view",{staticClass:"modal-msg-name"},[i("v-uni-view",{staticClass:"modal-msg-name-label"},[t._v("姓名")]),i("v-uni-view",{staticClass:"modal-msg-name-input"},[i("v-uni-input",{attrs:{type:"text"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1)],1),i("v-uni-view",{staticClass:"modal-msg-mobile"},[i("v-uni-view",{staticClass:"modal-msg-mobile-label"},[t._v("手机号")]),i("v-uni-view",{staticClass:"modal-msg-mobile-input"},[i("v-uni-input",{attrs:{type:"number"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),i("v-uni-view",{staticClass:"modal-msg-mobile-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendCode(t.mobile)}}},[t._v("发送验证码")])],1),i("v-uni-view",{staticClass:"modal-msg-qrcode"},[i("v-uni-view",{staticClass:"modal-msg-qrcode-label"},[t._v("验证码")]),i("v-uni-view",{staticClass:"modal-msg-qrcode-input"},[i("v-uni-input",{attrs:{type:"number"},model:{value:t.qrcode,callback:function(e){t.qrcode=e},expression:"qrcode"}})],1)],1),i("v-uni-view",{staticClass:"modal-msg-alert-text"},[t._v("请填写个人信息，否则分数不进入排行榜！！！")]),i("v-uni-view",{staticClass:"modal-msg-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.otpLogin.apply(void 0,arguments)}}},[i("span",[t._v("确认信息")])])],1)],1)},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}))},bd79:function(t,e,i){"use strict";var a=i("a99e"),n=i.n(a);n.a}}]);